
<!DOCTYPE html>
<html>
<head>
  <title>Assignment 1</title>
  <meta charset="UTF-8">
  <script type="text/javascript" src="jquery.min.js"></script>
  <style type="text/css">
  body {
    margin-left: 120px;
    margin-right: 120px;
  }
  .document {
    width: 19%;
    height: 300px;
  }
  .result {
    width: 100%;
    height: 300px;
  }
  </style>
</head>
<body>



<div id="Documents">
<h3>Documents</h3>
<textarea class="document" id="document_1">In 1947, John Nash (Crowe) arrives at Princeton University. He is co-recipient, with Martin Hansen (Lucas), of the prestigious Carnegie Scholarship for mathematics. At a reception, he meets a group of other promising math and science graduate students, Richard Sol (Goldberg), Ainsley (Jason Gray-Stanford), and Bender (Rapp). He also meets his roommate Charles Herman (Bettany), a literature student.

Nash is under extreme pressure to publish, but he wants to publish his own original idea. His inspiration comes when he and his fellow graduate students discuss how to approach a group of women at a bar. Hansen quotes Adam Smith and advocates "every man for himself", but Nash argues that a cooperative approach would lead to better chances of success. Nash develops a new concept of governing dynamics and publishes an article on this. On the strength of this, he is offered an appointment at MIT where Sol and Bender join him.

Some years later, Nash is invited to the Pentagon to crack encrypted enemy telecommunication. Nash can decipher the code mentally, to the astonishment of other decrypters. He considers his regular duties at MIT uninteresting and beneath his talents, so he is pleased to be given a new assignment by his mysterious supervisor, William Parcher (Harris) of the United States Department of Defense. He is to look for patterns in magazines and newspapers in order to thwart a Soviet plot. Nash becomes increasingly obsessive about searching for these hidden patterns and believes he is followed when he delivers his results to a secret mailbox.

Meanwhile a student, Alicia Larde (Connelly), asks him to dinner, and the two fall in love. On a return visit to Princeton, Nash runs into Charles and his niece, Marcee (Cardone). With Charles' encouragement, he proposes to Alicia and they marry.

Nash begins to fear for his life after witnessing a shootout between Parcher and Soviet agents, but Parcher blackmails him into staying on his assignment. While delivering a guest lecture at Harvard University, Nash tries to flee from people he thinks are foreign agents, led by Dr. Rosen (Plummer). After punching Rosen in an attempt to flee, Nash is forcibly sedated and sent to a psychiatric facility he believes is run by the Soviets.

Dr. Rosen tells Alicia that Nash has paranoid schizophrenia and that Charles, Marcee, and Parcher exist only in his imagination. Alicia investigates and finally confronts Nash with the unopened documents he had delivered to the secret mailbox. Nash is given a course of insulin shock therapy and eventually released. Frustrated with the side-effects of the antipsychotic medication he is taking, which make him lethargic and unresponsive, he secretly stops taking it. This causes a relapse and he meets Parcher again.

After an incident where Nash endangers his infant son and accidentally knocks Alicia and the baby to the ground (thinking he's stopping Parcher from killing her), she flees the house with their child. Nash steps in front of her car to prevent her from leaving, after he realizes that he's known Marcee for a long time, yet she never grew older. He finally accepts that Parcher and other figures are hallucinations. Against Dr. Rosen's advice, Nash decides not to restart his medication, believing that he can deal with his symptom himself. Alicia decides to stay and support him in this.

Nash approaches his old friend and rival, Martin Hansen, now head of the Princeton mathematics department. He grants Nash permission to work out of the library and to audit classes. Years pass and as Nash grows older, he learns to ignore his hallucinations and earns the privilege of teaching again.

In 1994, Nash is honored by his fellow professors for his achievement in mathematics. He wins the Nobel Memorial Prize in Economics for his revolutionary work on game theory. The movie ends as Nash and Alicia leave the auditorium in Stockholm; Nash sees Charles, Marcee, and Parcher standing to one side and watching him.</textarea>

<textarea class="document" id="document_2">In AD 180, Spanish-Roman General Maximus Decimus Meridius leads the Roman army to a decisive victory against the Germanic tribes near Vindobona, ending a long war on the Roman frontier and winning the favor of Emperor Marcus Aurelius. The emperor is already old and dying, and although he has a son, Commodus, he asks Maximus to succeed him as a regent and turn Rome back into a republic. The emperor speaks with Commodus afterwards and attempts to explain his decision. A weeping Commodus retorts that Marcus Aurelius never valued his son, and kills the emperor.

Maximus is confronted by Commodus, who asks for Maximus' loyalty, but the general suspects his plot and refuses. General Quintus, a subordinate and old friend to Maximus, chooses to follow Commodus' orders and sends men to the Roman province of Spain to kill Maximus's wife and son on their farm estate. Maximus manages to escape his own execution and makes the long journey to his farm on horseback, but finds his family already dead and their bodies crucified. He buries them and collapses in despair. A passing slave caravan captures Maximus, assuming that he is a deserter. Maximus is taken to Zucchabar, in the North African province of Mauretania. He is sold to a man named Proximo, who uses him as a gladiator.

Maximus is forced to fight in local tournaments, and wins every match because of his military skills and traumatized indifference to death. He makes friends with Proximo's other gladiators, including a Numidian named Juba and a German named Hagen. His successes allow Proximo to bring the team to the Roman Colosseum, where Commodus, now the emperor, has organized 150 days of games to honor his late father. Proximo explains to Maximus that he was himself a gladiator who fought well enough in the Colosseum to win his freedom, granted to him by Marcus Aurelius himself. Maximus realizes that if he fights well enough in the Colosseum he may have a chance to personally meet the Emperor, giving him his chance to kill Commodus.

Having arrived at the Colosseum, Proximo's team is put in a match that is meant to be a reenactment of the Battle of Zama. Maximus and his teammates are on foot, armed with spears and shields, against a cohesive and well-equipped force of mounted fighters and archers in chariots. Through Maximus's leadership, however, the team is able to destroy their opponents. Commodus comes into the arena to personally congratulate "the Spaniard" (Maximus) on his victory. Maximus braces himself to kill Commodus, but at the last moment decides against it, apparently because of the presence of Commodus's young nephew Lucius Verus. At this point, Maximus removes his helmet and reveals himself to the startled Commodus as "Commander of the armies of the north, General of the Felix legions, loyal servant of the true emperor, Marcus Aurelius, father to a murdered son, husband to a murdered wife". Maximus promises to exact vengeance against Commodus, who is still in shock to learn that the general is still alive. While Commodus longs to execute the former general on the spot, he cannot as the vast arena crowd chants "Live!" repeatedly, demonstrating their support for Maximus.

Commodus tries to have Maximus killed by paying Tigris of Gaul, a former gladiator, to come back and fight Maximus. Tigris is well known, having earned his freedom by never being defeated. During the match, Colosseum staff approach Maximus from behind, holding tigers by the leash, in order to put Maximus at a disadvantage. Against all expectations, Maximus still wins, but he spares Tigris's life and is declared by the crowd as "Maximus the Merciful" and this further angers Commodus. Face to face, the emperor taunts Maximus with harrowing details of how his family died. Maximus responds by turning his back on Commodus and walking away.

As Maximus is being escorted back to the gladiator's quarters, his former orderly Cicero approaches him and says that Maximus still has the loyalty of the Legion, encamped near Rome. Commodus's sister Lucilla and the senator Gracchus secure a meeting with Maximus, and Maximus obtains their promise to help him escape Rome, rejoin his soldiers, topple Commodus by force, and hand over power to the Senate. Commodus, however, suspects a plot against him and forces Lucilla to confess it by threatening to kill her son Lucius. Praetorians close in upon the gladiator quarters before Maximus can leave. Proximo refuses to open the gate in order to enable Maximus to escape. When the Praetorians break through, Proximo's gladiators assault them in order to give Maximus more time. The Praetorians kill Hagen and execute Proximo. Maximus reaches the rendezvous place but more Praetorians are waiting. Cicero is killed and Maximus is captured.

Commodus, angered by his sister's betrayal, explains that if she disobeys him or kills herself he will kill Lucius. Desperate to kill Maximus and to restore his own standing, Commodus arranges a public duel between them both. Before the fight begins, Commodus stabs the chained Maximus in the side, leaving him severely weakened, but also admits obliquely to killing his own father, in Quintus's presence. During the fight, Maximus still manages to evade Commodus's blows and disarm him. Commodus asks the Praetorians to give him a sword, but Quintus orders the guards to sheathe their weapons. Commodus produces a hidden stiletto, but Maximus turns the blade back into Commodus's throat, killing him.

Maximus succumbs to the stab wound asking with his last words that reforms be made, his gladiator allies freed, and that Senator Gracchus be reinstated. As he dies, he has a vision of walking through a gate into a field of grain and of being finally reunited with his wife and son in an afterlife which resembles his country estate. At the behest of Lucilla, the gladiators, Lucius, Quintus, and Gracchus carry out Maximus' body for an honorable funeral as a "soldier of Rome", leaving Commodus behind in the dirt. Some time later, Juba revisits the Colosseum at night, and he buries Maximus's two small figurines of his wife and son at the spot where he died. Juba promises that he will see Maximus again, "but not yet".</textarea>

<textarea class="document" id="document_3">Dr. Ryan Stone is a biomedical engineer aboard the NASA space shuttle Explorer for her first space mission, STS-157. Veteran astronaut Matt Kowalski is commanding his final mission. During a spacewalk to service the Hubble Space Telescope and Stone's upgrades to the Telescope, Mission Control in Houston warns the team about a Russian missile strike on a defunct satellite, which has inadvertently caused a chain reaction forming a cloud of debris in space. Mission Control orders that the mission be aborted and the shuttle begin re-entry immediately because the debris is speeding towards the telescope. Communication with Mission Control is lost shortly thereafter.

High speed debris from the Russian satellite strikes the Explorer and Hubble, detaching Stone from the shuttle and leaving her tumbling through space. Kowalski, using a manned maneuvering unit (MMU), recovers Stone and they return to the Explorer. They discover that it has suffered catastrophic damage and the rest of the crew is dead. They use the MMU to reach the International Space Station (ISS), which is in orbit about 1,450 km (900 mi) away. Kowalski estimates they have 90 minutes before the debris field completes an orbit and threatens them again.

En route to the ISS, the two discuss Stone's home life and the death of her young daughter. As they approach the substantially damaged but still operational ISS, they see its crew has evacuated in one of its two Soyuz modules. The parachute of the remaining Soyuz has deployed, rendering the capsule useless for returning to Earth. Kowalski suggests using it to travel to the nearby Chinese space station Tiangong, 100 km (60 mi) away, in order to board a Chinese module to return safely to Earth. Out of air and maneuvering power, the two try to grab onto the ISS as they fly by. Stone's leg gets entangled in Soyuz's parachute cords and she grabs a strap on Kowalski's suit. Despite Stone's protests, Kowalski detaches himself from the tether to save her from drifting away with him, and she is pulled back towards the ISS while Kowalski floats away to certain death. He continues to support her until he is out of communications reach.

Stone enters the ISS via an airlock. She cannot re-establish communication with Kowalski and concludes that she is the sole survivor. A fire breaks out, forcing her to rush to the Soyuz. As she maneuvers the capsule away from the ISS, the tangled parachute tethers prevent it from separating from the station. She spacewalks to release the cables, succeeding just as the debris field completes its orbit and destroys the station. Stone aligns the Soyuz with Tiangong but discovers that its engine has no fuel.

After a poignant attempt at radio communication with an Eskimo–Aleut-speaking fisherman on Earth, Stone resigns herself to being stranded and shuts down the cabin's oxygen supply to commit suicide. As she begins to lose consciousness, Kowalski enters the capsule. Scolding her for giving up, he tells her to rig the Soyuz's landing rockets to propel the capsule toward Tiangong. Stone then realizes that Kowalski's reappearance was not real, but has nonetheless given her the strength of will to continue. She restores the flow of oxygen and uses the landing rockets to navigate toward Tiangong, which is rapidly deorbiting.

Unable to maneuver the Soyuz to dock with the station, Stone ejects herself via explosive decompression and uses a fire extinguisher as a makeshift thruster to travel the final meters to Tiangong. Stone enters the Shenzhou capsule just as Tiangong starts to break up on the upper edge of the atmosphere. Stone radios that she is ready to head back to Earth. After re-entering the atmosphere, Stone hears Mission Control, which is tracking the capsule. But due to a harsh reentry and the premature separation of the heat shield a fire is starting inside the capsule.

After speeding through the atmosphere, the capsule lands in a lake, but dense smoke forces Stone to evacuate immediately after the splashdown. She opens the capsule hatch, allowing water to enter and sink it, forcing Stone to shed her spacesuit and swim ashore. She watches the remains of the Tiangong re-enter the atmosphere and takes her first shaky steps on land.</textarea>

<textarea class="document" id="document_4">Approaching his 111th birthday, the hobbit Bilbo Baggins begins writing down the full story of his adventure 60 years earlier for the benefit of his nephew Frodo. Long before Bilbo's involvement, the Dwarf king Thrór brings an era of prosperity for his kin under the Lonely Mountain until the arrival of the dragon Smaug. Destroying the nearby town of Dale, Smaug drives the Dwarves out of their mountain and takes their hoard of gold. Thrór's grandson Thorin sees King Thranduil and his Wood-elves on a nearby hillside, and is dismayed when they take their leave rather than aid his people, resulting in Thorin's everlasting hatred of Elves.

In the Shire, 50-year-old Bilbo is tricked by the wizard Gandalf the Grey into hosting a party for Thorin and his company of dwarves: Balin, Dwalin, Fíli, Kíli, Dori, Nori, Ori, Óin, Glóin, Bifur, Bofur, and Bombur. Gandalf's aim is to recruit Bilbo as the company's "burglar" to aid them in their quest to enter the Lonely Mountain. Bilbo is unwilling to accept at first but has a change of heart after the company leaves without him. Travelling onward, the company is captured by three trolls. Bilbo stalls the trolls from eating them until dawn. Gandalf exposes the trolls to sunlight turning them to stone. They search the trolls' cave and find treasure and Elven blades. Thorin and Gandalf each take an Elf-made blade—Orcrist and Glamdring, respectively. Gandalf also finds an elven shortsword ("Sting"), which he gives to Bilbo.

The company meets the wizard Radagast the Brown, who tells them of an encounter at Dol Guldur with the Necromancer, a sorcerer who has been corrupting Greenwood with dark magic. The company is then chased by orcs on wargs. Radagast covers the company's escape as Gandalf leads the company through a stone passage to Rivendell. There, Lord Elrond discloses a hidden indication of a secret door on the company's map of the Lonely Mountain, which will be visible only on Durin's Day. Gandalf later approaches the White Council—consisting of Elrond, Galadriel and Saruman the White—about his involvement with the dwarves. He also presents a Morgul blade Radagast obtained from Dol Guldur as a sign that the Necromancer is linked to the Witch-king of Angmar, despite Saruman's skepticism. When Saruman presses concern to the more present matter of the dwarves and Smaug, requesting that Gandalf put an end to the quest, Gandalf secretly reveals to Galadriel he had anticipated this and had the dwarves move forward on their quest without him.

The company journeys into the Misty Mountains where they find themselves amid a colossal battle between stone giants. They take refuge in a cave and are captured by Goblins, who take them to their leader, the Great Goblin. Bilbo becomes separated from the dwarves and falls into a cave where he encounters Gollum, who accidentally drops a golden ring while killing a stray goblin to eat. Pocketing the ring, Bilbo finds himself confronted by Gollum. They play a riddle game, wagering that Bilbo will be shown the way out if he wins or eaten by Gollum if he loses. Bilbo eventually wins by asking Gollum what he has in his pocket. Noticing his ring is lost, Gollum suspects that Bilbo possesses it and attacks him. Bilbo discovers that the ring grants him invisibility, but when he has a chance to kill Gollum, Bilbo spares his life and escapes while Gollum curses the hobbit.

Meanwhile, the Great Goblin reveals to the dwarves that Azog, an Orc war-chief who beheaded Thrór and lost his forearm to Thorin in battle outside the Dwarven kingdom of Moria, has placed a bounty on Thorin's head. Gandalf arrives and leads the dwarves in an escape and kills the Great Goblin. Bilbo exits the mountain and rejoins the company, keeping secret his newly obtained ring. The company is ambushed by Azog and his hunting party, and takes refuge in trees. Thorin charges at Azog, but is knocked unconscious and left defenseless on the ground. Bilbo saves Thorin from the orcs just as the company is rescued by eagles. They escape to the safety of the Carrock where Gandalf is able to revive Thorin, who renounces his previous disdain for Bilbo after being saved by him. In the distance, the company sees the Lonely Mountain, where the sleeping Smaug is awakened by the knocking sound of a thrush.</textarea>

<textarea class="document" id="document_5">In the near future, crop blight has caused civilization to regress into a failing agrarian society. Former NASA pilot Cooper (Matthew McConaughey) runs a farm with his family. Murphy (Mackenzie Foy), Cooper's 10-year-old daughter, believes her room is haunted by a poltergeist trying to communicate with her. They come across a malfunctioning Indian unmanned aerial vehicle that they salvage for spare parts. They soon discover that Murphy's "ghost" is an unknown intelligence sending coded messages using gravitational waves, leaving binary coordinates in the dust that direct them to a secret NASA installation led by Professor John Brand (Michael Caine). Brand reveals that a wormhole, apparently created by an alien intelligence, has opened near Saturn and leads to new planets in another galaxy that may offer hope for survival. NASA's "Lazarus missions" have identified three potentially habitable worlds orbiting a supermassive black hole named Gargantua: Miller, Edmunds, and Mann, named after the astronauts who surveyed them. Brand recruits Cooper to pilot the spacecraft Endurance to recover the astronauts' data; if one of the planets is habitable, humanity will follow on space stations. Cooper's departure devastates Murphy, and they part on bad terms.

On Endurance, Cooper joins Brand's daughter, biotechnologist Amelia (Anne Hathaway); scientists Romilly (David Gyasi) and Doyle (Wes Bentley); and robots TARS and CASE. They travel to Saturn and enter the wormhole, heading to Miller, but they discover that the planet is so close to Gargantua that it experiences severe gravitational time dilation; each hour on the surface is seven years on Earth. A team descends to the planet, which proves inhospitable as it is covered by a shallow ocean roiled by enormous tidal waves. As Amelia attempts to recover Miller's data, a wave hits, killing Doyle and delaying the shuttle's departure. When the others return to Endurance, 23 years have passed.

On Earth, the adult Murphy (Jessica Chastain) is now a NASA scientist helping Brand with an equation that will enable NASA to launch the space stations via gravity. With his last breath, Brand admits he already solved the problem and determined the project is impossible. He concealed his findings to keep hope alive and put his faith in "Plan B": using frozen embryos aboard the Endurance to start humanity anew. However, Murphy concludes that Brand's equation could work with additional data from a black hole's singularity.

Low on fuel, Endurance can only visit one more planet before returning to Earth. After a tense vote, the team selects Mann's planet, as Mann is still transmitting. However, they discover it is perpetually cold, covered with icy glaciers, and inhospitable. Mann (Matt Damon), who always knew Plan B was the mission's true goal, faked data about his planet's viability so Endurance would rescue him. Mann breaks Cooper's spacesuit visor and leaves him to die, and flees to Endurance on a shuttle; Romilly is killed by a bomb Mann set to protect his secret. Amelia rescues Cooper using the other cargo shuttle, and they arrive at Endurance in time to witness Mann docking improperly. The airlock explodes, killing Mann and causing serious damage, but Cooper uses the cargo shuttle to get Endurance under control.

Nearly out of fuel, Cooper and Amelia plan to slingshot Endurance around Gargantua on a course toward Edmunds on the other side of the black hole while many years will pass on Earth. TARS and Cooper detach their shuttles into the black hole, sacrificing themselves to collect data on the singularity and to propel Amelia and CASE by dropping the ship's mass. They emerge in an extra-dimensional location called "The Tesseract", where time appears as a spatial dimension and portals show glimpses of Murphy's childhood bedroom at various times. Cooper realizes that the wormhole's creators are future humans transcending time and space, who have constructed the tesseract so he can communicate with Murphy as her "ghost" and save humanity. Using gravitational waves, Cooper encodes TARS's data on the singularity into the adult Murphy's watch, allowing her to solve Brand's equation and launch the space stations.

Once the data is transmitted, the tesseract dissolves and Cooper finds himself traveling through the wormhole, coming into orbit around Saturn. He awakens aboard a NASA space station and reunites with the now elderly Murphy (Ellen Burstyn), who has led humanity's exodus. Satisfied that Cooper has kept his promise to one day come back, Murphy convinces Cooper to search for Amelia, who is implementing Plan B with CASE on Edmunds' desert, hospitable planet. Cooper and TARS, who was also rescued from space, steal a NASA shuttle to travel to Edmunds' Planet.</textarea>
<button id="run_index">DO INDEX!</button>
<hr />
</div>


<div id="step0">
<h3>Step 0: Raw Data</h3>
<textarea class="result" id="result_step0">THE FROG-PRINCE
</textarea>
<button id="run1">Run Step 1</button>
<hr />
</div>

<div id="step1">
  <h3>Step 1: Normalize the text by (1) convert all letters to lowercase letters</h3>
  <textarea class="result" id="result_step1"></textarea>
  <button id="run2">Run Step 2</button>
  <hr />
</div>

<div id="step2">
  <h3>Step 2: Remove other symbols, for examples “.”, “:”, “!”, and others</h3>
  <textarea class="result" id="result_step2"></textarea>
  <input type="text" value="30" id="n_dictionary_row" />
  <button id="run3">Run Step 3</button>
  <hr />
</div>

<div id="step3">
  <h3>Step 3: Tokenize the normalized text into tokens and their location. Print out some
  location on the text file to show that it works.</h3>
  <textarea class="result" id="result_step3"></textarea>
  <hr />
</div>

<div id="step4">
  <h3>Step 4: Implement the in-memory array-based version of inverted indices presented in
  the lecture using the binary search of the next method. Show that the next
  method works.</h3>
  Find next index of <input id="word_of_next" type="text" placeholder="word" />
  from index  <input id="index_of_next" type="text" placeholder="index" />
  <button id="run4">Search!</button><br /><br />
  <pre id="result_step4"></pre>
  <hr />
</div>

<div id="step5">
  <h3>Step 5: Use your implementation of inverted indices, implement the basic phrase
  search algorithm presented in the lecture. Show that it works by printing out some results.</h3>
  Search phrase <input id="phrase" type="text" placeholder="phrase" />
  <button id="run5">Search!</button><br /><br />
  <pre id="result_step5"></pre>
  <hr />
</div>







  <script>



  var indexedData;
  var dictionary;

  var documents = [];


  // Index documents
  $('#run_index').click(function() {
    // Read documents
    $("textarea[id^='document_']").each(function(index) {

      var data = $(this).val();
      data = convertLowerCase(data);
      data = filterSymbols(data);
      documents[index] = data;

      alert(data);
    });
  });



  // Step 3: Tokenization
  $('#run3').click(function() {
    var tokens = tokenize(data);
    dictionary = tokens[1];
    indexedData = tokens[0];
    var nRow = $("#n_dictionary_row").val();
    $("#result_step3").html(printDictionary(dictionary,nRow));
  });


  // Step 4: Next function
  $('#run4').click(function() {
    var fromIndex = parseInt($('#index_of_next').val());
    fromIndex = isNaN(fromIndex) ? 0 : fromIndex;
    var word = $('#word_of_next').val();

    if(word.length>0) {
      resultIndex = next(dictionary[word],fromIndex);
      if(resultIndex==-1) {
        resultIndex = 'Word not found';
      } else if(resultIndex==-2) {
        resultIndex = 'Exceed last index';
      }
      $("#result_step4").html( resultIndex );
    }
  });


  // Step 5: Search phrase
  $('#run5').click(function() {
    var phrase = $('#phrase').val();
    var addition = 3;
    if(phrase.length>0) {
      var resultIndeces = searchParse(phrase)
      var resultString = "";
      for(var i in resultIndeces) {
        var resultIndex = resultIndeces[i];
        for(var j = resultIndex[0]-addition ; j<resultIndex[resultIndex.length-1]+1+addition ; j++) {
          if(j<0 || j>=indexedData.length) {
            continue;
          }

          if(j == resultIndex[0]) {
            resultString += '<strong>';
          }
          resultString += indexedData[j];

          if(j == resultIndex[resultIndex.length-1]) {
            resultString += '</strong>';
          }
          resultString += " ";

        }
        resultString += "\n";
      }
      $("#result_step5").html( resultString );
    }
  });


  function convertLowerCase(string) {
    return string.toLowerCase();
  }

  function searchParse(phrase) {
  	phrase = phrase.trim();
    phrase = convertLowerCase(phrase);
    phrase = filterSymbols(phrase);
    words = phrase.split(" ");

    var firstWordIndex = -1;
    var result = new Array();
    while(true) {

      firstWordIndex = next(dictionary[ words[0] ], firstWordIndex);
      if(firstWordIndex<0) {
        break;
      }

      var foundFlag = true;
      for(var i=1;i<words.length;i++) {
        if( next(dictionary[ words[i] ], firstWordIndex+i-1) != firstWordIndex+i ) {
          foundFlag = false;
          break;
        }
      }

      if(foundFlag) {
        var temp = new Array();
        for(var i=0;i<words.length;i++) {
          temp.push(firstWordIndex+i);
        }
        result.push(temp);
      }

      firstWordIndex++;
    }
    return result;
  }


  function next(array,fromIndex) {

    fromIndex += 1;
    // No data
    if(array==undefined || array.length==0) {
      return -1;
    }

    var count = array.length;
    // Only one element
    if(count==1) {
      return array[0] >= fromIndex ? array[0] : -2;
    }

    // Exceed last index
    if(array[count-1] < fromIndex) {
      return -2;
    }

    var begin = 0;
    var end = count-1;
    var pivot = Math.floor((end+begin)/2);

    while(begin<end) {
      if(fromIndex < array[pivot]) {
        end = pivot;
      } else if(fromIndex > array[pivot]) {
        begin = pivot+1;
      } else {
        begin = pivot;
        end = pivot;
      }
      pivot = Math.floor((end+begin)/2);
    }

    return array[pivot];
  }


  function filterSymbols(data) {
    var removes = ["'",'"','!',',',':',';'];
    for(i in removes) {
      var re = new RegExp(removes[i], 'g');
      data = data.replace(re, "");
    }
    data = data.replace(/\./g,'');
    data = data.replace(/\?/g,' ');
    while(data.indexOf("  ")!==-1) {
      data = data.replace(/  /g,' ');
    }
    while(data.indexOf("\n ")!==-1) {
      data = data.replace(/\n /g,'\n');
    }
    while(data.indexOf(" \n")!==-1) {
      data = data.replace(/ \n/g,'\n');
    }
    while(data.indexOf("\n\n")!==-1) {
      data = data.replace(/\n\n/g,'\n');
    }
    return data;
  }

  function tokenize(data) {
    var dictionary = new Array();
    var indexedData = new Array();
    var lines = data.split("\n");
    var k = 0;
    var lineNo = 0;
    for(i in lines) {
      var line = lines[i].split(" ");
      for(j in line) {
        var word = line[j];
        var index = 0;
        if(dictionary[word] === undefined) {
          dictionary[word] = new Array();
        } else {
          index = dictionary[word].length;
        }
        dictionary[word][index] = k;
        indexedData[k] = word;
        k++;
      }
      lineNo++;
    }

    return [indexedData,dictionary];
  }

  function printDictionary(dictionary,n) {
    var result = "";
    for(word in dictionary) {
      if(n--<=0)
        break;

      var positions = dictionary[word];
      result += word + " ("+ positions.length +")" + ": ";
      for(i in positions) {
        var position = positions[i];
        result += position + ", ";
      }
      result = result.substr(0, result.length - 2);
      result += "\n";
    }
    return result;
  }



  </script>

</body>
</html>
